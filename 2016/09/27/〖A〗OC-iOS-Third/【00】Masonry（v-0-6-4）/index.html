<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <link rel="apple-touch-icon" href="touch-icon-mac.png">
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  
    
      
    

    
  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|comic sans:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="SanFordy" />





  <link rel="alternate" href="/atom.xml" title="SanFordy`s　magic" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Masonry是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装了autolayout，简洁明了并具有iOS高可读性，而且同时支持iOS和OS X。">
<meta property="og:type" content="article">
<meta property="og:title" content="【00】Masonry（v 0.6.4）">
<meta property="og:url" content="http://sanfordy.com/2016/09/27/〖A〗OC-iOS-Third/【00】Masonry（v-0-6-4）/index.html">
<meta property="og:site_name" content="SanFordy`s　magic">
<meta property="og:description" content="Masonry是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装了autolayout，简洁明了并具有iOS高可读性，而且同时支持iOS和OS X。">
<meta property="og:image" content="http://images2015.cnblogs.com/blog/776348/201609/776348-20160927112146860-2110549502.jpg">
<meta property="og:updated_time" content="2016-10-13T01:44:03.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【00】Masonry（v 0.6.4）">
<meta name="twitter:description" content="Masonry是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装了autolayout，简洁明了并具有iOS高可读性，而且同时支持iOS和OS X。">
<meta name="twitter:image" content="http://images2015.cnblogs.com/blog/776348/201609/776348-20160927112146860-2110549502.jpg">


<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: undefined,
      author: '博主'
    }
  };
</script>



  <title> 【00】Masonry（v 0.6.4） | SanFordy`s　magic </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">SanFordy`s　magic</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">　　　　　　</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                【00】Masonry（v 0.6.4）
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-27T11:07:30+08:00" content="2016-09-27">
              2016-09-27
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/〖A〗OC-iOS-Third/" itemprop="url" rel="index">
                    <span itemprop="name">〖A〗OC-iOS-Third</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/27/〖A〗OC-iOS-Third/【00】Masonry（v-0-6-4）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/27/〖A〗OC-iOS-Third/【00】Masonry（v-0-6-4）/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
              &nbsp; | &nbsp;
              <span class="page-pv">
              <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次数阅读
              </span>
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>Masonry是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装了autolayout，简洁明了并具有iOS高可读性，而且同时支持iOS和OS X。</p>
</blockquote>
<a id="more"></a>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Masonry是一个轻量级的布局框架，拥有自己的描述语法，采用更优雅的链式语法封装了autolayout，简洁明了并具有iOS高可读性，而且同时支持iOS和OS X。</p>
<h2 id="了解Masonry"><a href="#了解Masonry" class="headerlink" title="了解Masonry"></a>了解Masonry</h2><h3 id="Masonry与传统布局的不同"><a href="#Masonry与传统布局的不同" class="headerlink" title="Masonry与传统布局的不同"></a>Masonry与传统布局的不同</h3><p>我要设置一个containView，他距离superView的上下左右边距都是10。</p>
<p>如果我用frame：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIEdgeInsets</span> edge = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"><span class="built_in">CGSize</span> superSize = view.superview.frame.size;</span><br><span class="line"><span class="built_in">CGFloat</span> width = superSize.width - edge.left - edge.right;</span><br><span class="line"><span class="built_in">CGFloat</span> heitht = superSize.height - edge.top - edge.bottom;</span><br><span class="line">view.frame = <span class="built_in">CGRectMake</span>(edge.left, edge.top, width, heitht);</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>逻辑比较复杂，阅读的时候还得想半天才能想明白，这个frame到底要表达的是什么意思。而且关键的是父View的大小如果改变，还需要再次重新设置Frame。</li>
</ul>
<p>如果我用Masonry：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIEdgeInsets</span> edge = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"> [view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">       make.edges.equalTo(view.superview).with.insets.(edge);</span><br><span class="line"></span><br><span class="line">     <span class="comment">/* 等价于</span><br><span class="line">        make.top.equalTo(sv).with.offset(10);</span><br><span class="line">        make.left.equalTo(sv).with.offset(10);</span><br><span class="line">        make.bottom.equalTo(sv).with.offset(-10);</span><br><span class="line">        make.right.equalTo(sv).with.offset(-10);</span><br><span class="line">        */</span></span><br><span class="line">    </span><br><span class="line">        <span class="comment">/* 也等价于</span><br><span class="line">       make.top.left.bottom.and.right.equalTo(sv).with.insets(UIEdgeInsetsMake(10, 10, 10, 10));</span><br><span class="line">        */</span></span><br><span class="line"> &#125;];</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>使用mas_makeConstraints在block中对View添加约束（make edges equalTo view.superview with insets）。view相对父View的边距为edge。代码简单，逻辑一目了然，而且还能跟父View一起调整。</li>
<li>可以看到 edges 其实就是top，left，bottom，right的一个简化 分开写也可以，一句话更省事，那么为什么bottom和right里的offset是负数呢？因为这里计算的是绝对的数值，计算的bottom需要小于sv的底部高度所以要-10，同理用于right（总之，上左用正数，下右用负数）。</li>
<li>这里有意思的地方是and和with其实这两个函数什么事情都没做：</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- (MASConstraint *)with &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (MASConstraint *)and &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><p>Masonry的本质是<code>Autolayout</code>，<code>Autolayout</code>是什么呢？<code>Autolayout</code>就是给View添加一堆约束，让View在布局的时候通过约束计算出Frame，然后进行布局。也就是说，我们设置的<code>Constraint</code>，要能体现出View的位置（x、y坐标）、大小（宽高）。无论是用IB拖拽约束，还是手写代码，只要从这个角度去思考，很多问题就都能解决。</p>
<p>Autolayout关于更新的几个方法的区别：</p>
<ol>
<li><code>setNeedsLayout</code>：告知页面需要更新，但是不会立刻开始更新。</li>
<li><code>ayoutIfNeeded</code>：告知页面布局立刻更新。一般都会和<code>setNeedsLayout</code>一起使用。如果希望立刻生成新的frame需要调用此方法，利用这点一般布局动画可以在更新布局后直接使用这个方法让动画生效。</li>
<li><code>layoutSubviews</code>：系统重写布局。</li>
<li><code>setNeedsUpdateConstraints</code>：告知需要更新约束，但是不会立刻开始。</li>
<li><code>uodateConstraintsIfNeeded</code>：告知立刻更新约束。</li>
<li><code>uodateConstraints</code>：系统更新约束。</li>
</ol>
<p>用Masonry创建一个完整的约束应该是这样的：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// view1的左边距离父View左边10个点：</span></span><br><span class="line">[view1 mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.left.equalTo(view1.superview.mas_left).multipliedBy(<span class="number">1</span>).offset(<span class="number">10</span>);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>对于一个约束，他实际表示的是一个不等或者相等关系：<br><img src="http://images2015.cnblogs.com/blog/776348/201609/776348-20160927112146860-2110549502.jpg" alt=""><br><code>item1</code>：make MASConstraintMaker类型，view1的承载对象，表示View1；<code>Attribute1</code>：left 表示左边。left的make的属性。返回值为MASConstraint类型；<code>Relationship</code>：equalTo 表示”=”。equalTo是MASConstraint的属性；<code>item2</code>：view1.superview。<code>Attribute2</code>：mas_left 同样表示左边，mas_left是Masonry给view加的属性，为了不重名，加了mas前缀；<code>multiplier</code>：multipliedBy(1) 系数为1。<code>Constant</code>：offset(10) 偏移量，常数为10。</li>
</ul>
<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><h4 id="MASConstraintMaker"><a href="#MASConstraintMaker" class="headerlink" title="MASConstraintMaker"></a>MASConstraintMaker</h4><p>上面的表达式中make是MASConstraintMaker类型，MASConstraintMaker给我们提供了22种属性的类型）：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Basic Attribute：基本属性，支持到iOS6，一般使用得比较多。</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *left;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *top;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *right;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *bottom;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *leading;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *trailing;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *width;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *height;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerX;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerY;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *baseline;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Margin Attribute：边缘相关属性，支持到iOS8。由于版本要求比较高，一般用得比较少。</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *leftMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *rightMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *topMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *bottomMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *leadingMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *trailingMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerXWithinMargins;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerYWithinMargins;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Convenient Attribute：便捷属性，为了使用方便而特意新增的属性。Autolayout本身没有对应的相关属性。</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *edges;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *size;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *center;</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>Convenient Attribute实际是基本属性的组合。比如：edges表示left，right，top，bottom。下面的两个代码实际的意义是一样的（代码示例）：</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Convenient Attribute</span></span><br><span class="line">make.edges.insets(edge);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Basic Attribute</span></span><br><span class="line">make.left.right.top.bottom.insets(edge);</span><br></pre></td></tr></table></figure>
<h4 id="MASConstraint"><a href="#MASConstraint" class="headerlink" title="MASConstraint"></a>MASConstraint</h4><p>前面我们看到MASConstraintMaker中所有的属性都是MASConstraint类型。对于多个属性一起写的表达式：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make.left.right.top.bottom.insets(edge);</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>make.left返回的已经是MASConstraint类型，也就是说right这个属性是MASConstraint的属性。MASConstraint给我们提供了19种属性，细看一下，MASConstraint中的属性和MASConstraintMaker完全一样。只是MASConstraintMaker中多了3种Convenient Attribute。两者属性的一致，大大的提升了使用的方便性。使用过程中我们不用再去区分当前属性是MASConstraint还是MASConstraintMaker类型。：</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Basic Attribute</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *left;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *top;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *right;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *bottom;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *leading;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *trailing;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *width;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *height;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerX;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerY;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *baseline;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Margin Attribute</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *leftMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *rightMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *topMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *bottomMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *leadingMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *trailingMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerXWithinMargins;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASConstraint *centerYWithinMargins;</span><br></pre></td></tr></table></figure>
<h4 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h4><p>我们可以看到在.equalTo(view1.superview.mas_left)里面，superView也有属性。我们来看看UIView中有哪些属性：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Basic Attribute</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_left;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_top;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_right;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_bottom;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_leading;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_trailing;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_width;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_height;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_centerX;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_centerY;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_baseline;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Margin Attribute</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_leftMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_rightMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_topMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_bottomMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_leadingMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_trailingMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_centerXWithinMargins;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_centerYWithinMargins;</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>可以看出，在UIView中的Attribute和MASConstraint中的几乎一模一样，只是每一个Attribute加了一个mas_前缀。</li>
<li>由于UIView是系统的类，对其扩展属性和方法一般都需要添加自己的前缀，避免跟原有属性和方法冲突。不过他们的意义跟MASConstraint中的Attribute是相同的。</li>
<li>属性中的leading与left、trailing与right在正常情况下是等价的，但是当一些布局是从右至左时（比如阿拉伯文） 则会对调，换句话说就是基本可以不理不用，用left和right就好了。</li>
</ul>
<h3 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h3><p>约束表示的是2个item之间的关系，在Autolayout中一共定义了3种关系：=，&gt;=，&lt;=，对应到Masonry中：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (MASConstraint * (^)(<span class="keyword">id</span> attr))equalTo;</span><br><span class="line">- (MASConstraint * (^)(<span class="keyword">id</span> attr))greaterThanOrEqualTo;</span><br><span class="line">- (MASConstraint * (^)(<span class="keyword">id</span> attr))lessThanOrEqualTo;</span><br></pre></td></tr></table></figure>
<p>相等关系我们一般用的多。那么不相等关系我们什么时候用呢？假如我有一个Label。Label的长度不能超出父View，如果label中的文字比较短，我希望是文字有多长，Label就有多长。由于label具有IntrinsicContentSize属性。所以默认情况下，他是文字有多长，Label就有多长，所以我们只需要设置Label的长度小于父View即可：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[label mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.left.offset(<span class="number">0</span>);</span><br><span class="line">    make.centerY.offset(<span class="number">0</span>);</span><br><span class="line">    make.width.lessThanOrEqualTo(label.superview);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<p>那么 mas_equalTo 和 equalTo 有什么区别呢？其实 mas_equalTo是一个MACRO  ：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define mas_equalTo(...)                 equalTo(MASBoxValue((__VA_ARGS__)))</span></span><br><span class="line"><span class="meta">#define mas_greaterThanOrEqualTo(...)    greaterThanOrEqualTo(MASBoxValue((__VA_ARGS__)))</span></span><br><span class="line"><span class="meta">#define mas_lessThanOrEqualTo(...)       lessThanOrEqualTo(MASBoxValue((__VA_ARGS__)))</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define mas_offset(...)                  valueOffset(MASBoxValue((__VA_ARGS__)))</span></span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>可以看到 mas_equalTo只是对其参数进行了一个BOX操作（装箱）， MASBoxValue的定义具体可以看看源代码 太长就不贴出来了。</li>
<li>所支持的类型，除了NSNumber支持的那些数值类型之外就只支持CGPoint、CGSize、UIEdgeInsets。</li>
<li>对于数值元素使用mas_equalTo。对于对象或是多个属性的处理，使用equalTo。特别是多个属性时，必须使用equalTo，例如：make.left.and.right.equalTo(self.view)。</li>
</ul>
<h3 id="乘数"><a href="#乘数" class="headerlink" title="乘数"></a>乘数</h3><p>Masonry提供了2种添加乘数（multiplier）的方法：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    Sets the NSLayoutConstraint multiplier property</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGFloat</span> multiplier))multipliedBy;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    Sets the NSLayoutConstraint multiplier to 1.0/dividedBy</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGFloat</span> divider))dividedBy;</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>一般宽或者高的约束使用乘数比较多。<code>multipliedBy</code>：直接设置乘数；<code>dividedBy</code>：设置乘数的倒数，multiplier = 1.0/dividedBy。</li>
</ul>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>Masonry提供了4种设置常量的方法：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Modifies the NSLayoutConstraint constant,only affects MASConstraints in which the first item's NSLayoutAttribute is one of the following NSLayoutAttributeTop, NSLayoutAttributeLeft, NSLayoutAttributeBottom, NSLayoutAttributeRight</span></span><br><span class="line">- (MASConstraint * (^)(MASEdgeInsets insets))insets;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Modifies the NSLayoutConstraint constant,only affects MASConstraints in which the first item's NSLayoutAttribute is one of the following NSLayoutAttributeWidth, NSLayoutAttributeHeight</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGSize</span> offset))sizeOffset;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Modifies the NSLayoutConstraint constant, only affects MASConstraints in which the first item's NSLayoutAttribute is one of the following NSLayoutAttributeCenterX, NSLayoutAttributeCenterY</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGPoint</span> offset))centerOffset;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Modifies the NSLayoutConstraint constant</span></span><br><span class="line">- (MASConstraint * (^)(<span class="built_in">CGFloat</span> offset))offset;</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>insets：用来设置left, right, top, bottom。接受MASEdgeInsets类型值。</li>
<li>sizeOffset：用来设置width, height。接受CGSize类型的值。</li>
<li>centerOffset：用来设置centerX, centerY。接受CGPoint类型的值。</li>
<li>offset：可以用来设置所有的东西。接受CGFloat类型的值。</li>
</ul>
<h3 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h3><p>如果等式两边的属性是一样的，我们可以省略等式右边的属性：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完整的</span></span><br><span class="line">make.left.equalTo(view2.mas_left).offset(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//省略属性的</span></span><br><span class="line">make.left.equalTo(view2).offset(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>如果是等于关系，并且右边的view是父视图的相同属性。连equalTo也可以省略：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 完整的</span></span><br><span class="line">make.left.equalTo(view1.superview.mas_left).offset(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//省略equalTo的</span></span><br><span class="line">make.left.offset(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>如果equalTo里面传的是NSValue类型，效果跟设置offset是一样的：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完整的</span></span><br><span class="line">make.left.equalTo(view1.superview.mas_left).offset(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用equalTo替代offset的（默认是跟俯视图的left进行约束）</span></span><br><span class="line">make.left.equalTo(@<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>如果offset为0，其实也是可以省略的：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 完整的</span></span><br><span class="line">make.left.equalTo(view1.superview.mas_left).offset(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//终极大招</span></span><br><span class="line">(<span class="keyword">void</span>)make.left;</span><br></pre></td></tr></table></figure>
<h3 id="设置约束"><a href="#设置约束" class="headerlink" title="设置约束"></a>设置约束</h3><p>对于约束的设置，Masonry提供了3种方法，分别为添加约束、更新约束、重写约束：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加约束    </span></span><br><span class="line">- (<span class="built_in">NSArray</span> *)mas_makeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新约束</span></span><br><span class="line">- (<span class="built_in">NSArray</span> *)mas_updateConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 重新设置约束</span></span><br><span class="line">- (<span class="built_in">NSArray</span> *)mas_remakeConstraints:(<span class="keyword">void</span>(^)(MASConstraintMaker *make))block;</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>mas_makeConstraints：添加新约束使用，必须事先添加到父元素的中，例如：[self.view addSubview:view]。</li>
<li>mas_updateConstraints：更新约束时使用。如果找不着这条约束，会新增，相当于mas_makeConstraints。mas_updateConstraints只能更新已有约束。如果第一次使用的是left，right设置的相对宽度。更新的时候想换成使用width。不能使用mas_updateConstraints，因为已有约束里面没有width的约束，新增width之后会跟原有left，right约束冲突。此时应该使用mas_remakeConstraints。</li>
<li>mas_remakeConstraints：重新设置约束。先将view上所有约束移除，再新增约束。</li>
</ul>
<h3 id="批量设置约束"><a href="#批量设置约束" class="headerlink" title="批量设置约束"></a>批量设置约束</h3><p>假设有View1，view2，view3三个View，我们想要他们的宽高都等于CGSizeMake(100, 50)。我们可以对他们进行批量设置：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSValue</span> *sizeValue = [<span class="built_in">NSValue</span> valueWith<span class="built_in">CGSize</span>:<span class="built_in">CGSizeMake</span>(<span class="number">100</span>, <span class="number">50</span>)];</span><br><span class="line">[@[view1,view2,view3] mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.size.equalTo(sizeValue);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h3><p>我们知道约束是有优先级的，Masonry给我们提供了4个设置优先级的接口：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//    Sets the NSLayoutConstraint priority to a float or MASLayoutPriority</span></span><br><span class="line">- (MASConstraint * (^)(MASLayoutPriority priority))priority;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    Sets the NSLayoutConstraint priority to MASLayoutPriorityLow</span></span><br><span class="line">- (MASConstraint * (^)())priorityLow;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    Sets the NSLayoutConstraint priority to MASLayoutPriorityMedium</span></span><br><span class="line">- (MASConstraint * (^)())priorityMedium;</span><br><span class="line"></span><br><span class="line"><span class="comment">//    Sets the NSLayoutConstraint priority to MASLayoutPriorityHigh</span></span><br><span class="line">- (MASConstraint * (^)())priorityHigh;</span><br></pre></td></tr></table></figure>
<p>&lt; 代码分析 &gt;</p>
<ul>
<li>priority：可以设置任意的优先级，接受的参数是0-1000的数字。</li>
<li>priorityLow：设置低优先级，优先级为250。</li>
<li>priorityMedium：设置中优先级，优先级为500。</li>
<li>priorityHigh：设置高优先级，优先级为750。</li>
<li>需要注意的是，使用priorityLow、priorityMedium、priorityHigh的时候需要加()。比如：.priorityHigh()。</li>
</ul>
<h3 id="键"><a href="#键" class="headerlink" title="键"></a>键</h3><p>当约束冲突发生的时候，我们经常为找不到是哪个View冲突的而烦恼，这一堆View是个什么东西呀：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&lt;MASLayoutConstraint:0x7f8de483fb10 UIView:0x7f8de2f53870.left == UIView:0x7f8de2f586c0.left&gt;"</span>,</span><br><span class="line"><span class="string">"&lt;MASLayoutConstraint:0x7f8de4818b50 UIView:0x7f8de2f53870.right == UIView:0x7f8de2f586c0.right&gt;"</span>,</span><br><span class="line"><span class="string">"&lt;MASLayoutConstraint:0x7f8de4818870 UIView:0x7f8de2f53870.width == 100&gt;"</span>,</span><br><span class="line"><span class="string">"&lt;NSLayoutConstraint:0x7f8de4847e90 UIView:0x7f8de2f586c0.width == 375&gt;"</span></span><br><span class="line"></span><br><span class="line">Will attempt to recover by breaking constraint </span><br><span class="line">&lt;MASLayoutConstraint:<span class="number">0x7f8de4818870</span> <span class="built_in">UIView</span>:<span class="number">0x7f8de2f53870</span>.width == <span class="number">100</span>&gt;</span><br></pre></td></tr></table></figure>
<p>这时候我们可以设置View的key：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.view.mas_key = <span class="string">@"self.view"</span>;</span><br><span class="line">view1.mas_key = <span class="string">@"view1"</span>;</span><br></pre></td></tr></table></figure>
<p>设置之后再看一下，哈哈，现在好多了。可以清晰的知道是哪个view了：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"&lt;MASLayoutConstraint:0x7fcd98d17c40 UIView:view1.left == UIView:self.view.left&gt;"</span>,</span><br><span class="line"><span class="string">"&lt;MASLayoutConstraint:0x7fcd98d2b2c0 UIView:view1.right == UIView:self.view.right&gt;"</span>,</span><br><span class="line"><span class="string">"&lt;MASLayoutConstraint:0x7fcd98d2adb0 UIView:view1.width == 100&gt;"</span>,</span><br><span class="line"><span class="string">"&lt;NSLayoutConstraint:0x7fcd98e42050 UIView:self.view.width == 375&gt;"</span></span><br><span class="line"></span><br><span class="line">Will attempt to recover by breaking constraint </span><br><span class="line">&lt;MASLayoutConstraint:<span class="number">0x7fcd98d2adb0</span> <span class="built_in">UIView</span>:view1.width == <span class="number">100</span>&gt;</span><br></pre></td></tr></table></figure>
<p>大家可能会觉得这样一个一个设置，多麻烦啊！别着急，Masonry提供了批量设置的宏MASAttachKey，只需要一句代码即可全部设置：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MASAttachKeys(<span class="keyword">self</span>.view,view1);</span><br></pre></td></tr></table></figure>
<p>当然也可以给约束设置键：</p>
<p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同样的对每条约束亦可以添加key</span></span><br><span class="line">make.height.greaterThanOrEqualTo(@<span class="number">5000</span>).key(<span class="string">@"ConstantConstraint"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="速记"><a href="#速记" class="headerlink" title="速记"></a>速记</h3><p>在写代码的时候，可能你会感觉有的东西要加<code>mas_</code>前缀，有的东西又不用加，代码风格不统一，而且加<code>mas_</code>前缀还麻烦。</p>
<p>前面介绍过加<code>mas_</code>前缀主要是在扩展系统类的时候为了避免与原有类冲突，这是Apple推荐的做法。不过目前来说，即使不加<code>mas_</code>前缀，也不会有什么问题。所以Masonry提供了不加<code>mas_</code>前缀的方法，只需要你定义几个宏即可：</p>
<ol>
<li><code>MAS_SHORTHAND</code>：在 import “Masonry” 之前定义 <code>MAS_SHORTHAND</code> 宏。可以使用 UIView ， NSArray 中不带 <code>mas_</code> 前缀的 makeConstraints ， updateConstraints ， remakeConstraints 。以及 UIView 中不带 mas_ 前缀的 Attribute 。</li>
<li><code>MAS_SHORTHAND_GLOBALS</code>：默认的equalTo方法只接受id类型的对象。有时候我们想传入一个CGFloat，CGSize，UIEdgeInsets等。还需要将其转化成NSValue对象，比较麻烦。Masonry也考虑到了这种情况。只需要在import “Masonry”之前定义MAS_SHORTHAND_GLOBALS宏。就可以直接对equalTo传入基础类型。Masonry自动转化成NSValue对象。</li>
</ol>
<h2 id="使用Masonry"><a href="#使用Masonry" class="headerlink" title="使用Masonry"></a>使用Masonry</h2><h3 id="添加约束"><a href="#添加约束" class="headerlink" title="添加约束"></a>添加约束</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  绿色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *greenView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    greenView.backgroundColor = <span class="built_in">UIColor</span>.greenColor;</span><br><span class="line">    greenView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    greenView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:greenView];</span><br><span class="line">    <span class="comment">//  红色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *redView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    redView.backgroundColor = <span class="built_in">UIColor</span>.redColor;</span><br><span class="line">    redView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    redView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:redView];</span><br><span class="line">    <span class="comment">//  蓝色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *blueView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    blueView.backgroundColor = <span class="built_in">UIColor</span>.blueColor;</span><br><span class="line">    blueView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    blueView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:blueView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  superview</span></span><br><span class="line">    <span class="built_in">UIView</span> *superview = <span class="keyword">self</span>;</span><br><span class="line">    <span class="comment">//  padding</span></span><br><span class="line">    <span class="keyword">int</span> padding = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  绿色视图添加约束</span></span><br><span class="line">    [greenView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(padding);</span><br><span class="line">        make.left.equalTo(padding);</span><br><span class="line">        make.bottom.equalTo(blueView.top).offset(-padding);</span><br><span class="line">        make.right.equalTo(redView.left).offset(-padding);</span><br><span class="line">        </span><br><span class="line">        make.width.equalTo(redView);</span><br><span class="line">        make.height.equalTo(@[redView,blueView]);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">//  红色视图添加约束</span></span><br><span class="line">    [redView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(padding);</span><br><span class="line">        make.left.equalTo(greenView.right).offset(padding);</span><br><span class="line">        make.bottom.equalTo(blueView.top).offset(-padding);</span><br><span class="line">        make.right.equalTo(superview.right).offset(-padding);</span><br><span class="line">        </span><br><span class="line">        make.width.equalTo(greenView);</span><br><span class="line">        make.height.equalTo(@[greenView, blueView]);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">//  蓝色视图添加约束</span></span><br><span class="line">    [blueView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(greenView.bottom).offset(padding);</span><br><span class="line">        make.left.equalTo(padding);</span><br><span class="line">        make.bottom.equalTo(-padding);</span><br><span class="line">        make.right.equalTo(-padding);</span><br><span class="line"></span><br><span class="line">        make.height.equalTo(@[greenView, redView]);</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<h3 id="更新约束"><a href="#更新约束" class="headerlink" title="更新约束"></a>更新约束</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleUpdateView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleUpdateView</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIButton</span> *growingButton;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGSize</span> buttonSize;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleUpdateView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  按钮</span></span><br><span class="line">    <span class="keyword">self</span>.growingButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeSystem</span>];</span><br><span class="line">    [<span class="keyword">self</span>.growingButton setTitle:<span class="string">@"Grow Me!"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    <span class="keyword">self</span>.growingButton.layer.borderColor = <span class="built_in">UIColor</span>.greenColor.CGColor;</span><br><span class="line">    <span class="keyword">self</span>.growingButton.layer.borderWidth = <span class="number">3</span>;</span><br><span class="line">    [<span class="keyword">self</span>.growingButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(didTapGrowButton:) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">    [<span class="keyword">self</span> addSubview:<span class="keyword">self</span>.growingButton];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.buttonSize = <span class="built_in">CGSizeMake</span>(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这是苹果建议更新约束的地方</span></span><br><span class="line">- (<span class="keyword">void</span>)updateConstraints &#123;</span><br><span class="line">    [<span class="keyword">self</span>.growingButton updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.center.equalTo(<span class="keyword">self</span>);</span><br><span class="line">        make.width.equalTo(<span class="keyword">self</span>.buttonSize.width).priorityLow();</span><br><span class="line">        make.height.equalTo(<span class="keyword">self</span>.buttonSize.height).priorityLow();</span><br><span class="line">        make.width.lessThanOrEqualTo(<span class="keyword">self</span>);</span><br><span class="line">        make.height.lessThanOrEqualTo(<span class="keyword">self</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">//  super要放在最后面</span></span><br><span class="line">    [<span class="keyword">super</span> updateConstraints];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  点击按钮</span></span><br><span class="line">- (<span class="keyword">void</span>)didTapGrowButton:(<span class="built_in">UIButton</span> *)button &#123;</span><br><span class="line">    <span class="keyword">self</span>.buttonSize = <span class="built_in">CGSizeMake</span>(<span class="keyword">self</span>.buttonSize.width * <span class="number">1.3</span>, <span class="keyword">self</span>.buttonSize.height * <span class="number">1.3</span>);</span><br><span class="line">    <span class="comment">//  告诉约束需要更新了</span></span><br><span class="line">    [<span class="keyword">self</span> setNeedsUpdateConstraints];</span><br><span class="line">    <span class="comment">// 更新约束，现在我们可以在动画里布局</span></span><br><span class="line">    [<span class="keyword">self</span> updateConstraintsIfNeeded];</span><br><span class="line">    <span class="comment">//  动画中布局</span></span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:<span class="number">0.4</span> animations:^&#123;</span><br><span class="line">        [<span class="keyword">self</span> layoutIfNeeded];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  基于约束的布局的方法-updateConstraints是懒触发的，只有在添加了约束的情况下，系统才会自动调用 -updateConstraints方法，如果把所有的约束放在 updateConstraints中，那么系统将会不知道你的布局方式是基于约束的，所以 重写+requiresConstraintBasedLayout 返回YES就是明确告诉系统：虽然我之前没有添加约束,但我确实是基于约束的布局！这样可以保证系统一定会调用 -updateConstraints 方法 从而正确添加约束.</span></span><br><span class="line">+ (<span class="built_in">BOOL</span>)requiresConstraintBasedLayout&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="移除约束"><a href="#移除约束" class="headerlink" title="移除约束"></a>移除约束</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleRemakeView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleRemakeView</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIButton</span> *movingButton;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> topLeft;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)toggleButtonPosition;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleRemakeView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  按钮</span></span><br><span class="line">    <span class="keyword">self</span>.movingButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeSystem</span>];</span><br><span class="line">    [<span class="keyword">self</span>.movingButton setTitle:<span class="string">@"Move Me!"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    <span class="keyword">self</span>.movingButton.layer.borderColor = <span class="built_in">UIColor</span>.greenColor.CGColor;</span><br><span class="line">    <span class="keyword">self</span>.movingButton.layer.borderWidth = <span class="number">3</span>;</span><br><span class="line">    [<span class="keyword">self</span>.movingButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(toggleButtonPosition) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">    [<span class="keyword">self</span> addSubview:<span class="keyword">self</span>.movingButton];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  是否靠在左上方</span></span><br><span class="line">    <span class="keyword">self</span>.topLeft = <span class="literal">YES</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  这是苹果建议的更新约束的地方</span></span><br><span class="line">- (<span class="keyword">void</span>)updateConstraints &#123;</span><br><span class="line">    [<span class="keyword">self</span>.movingButton remakeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.width.equalTo(<span class="number">100</span>);</span><br><span class="line">        make.height.equalTo(<span class="number">100</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">self</span>.topLeft) &#123;</span><br><span class="line">            make.left.equalTo(<span class="number">10</span>);</span><br><span class="line">            make.top.equalTo(<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            make.bottom.equalTo(<span class="number">-10</span>);</span><br><span class="line">            make.right.equalTo(<span class="number">-10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="comment">//  写在最后</span></span><br><span class="line">    [<span class="keyword">super</span> updateConstraints];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)toggleButtonPosition &#123;</span><br><span class="line">    <span class="keyword">self</span>.topLeft = !<span class="keyword">self</span>.topLeft;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  告诉约束需要更新了</span></span><br><span class="line">    [<span class="keyword">self</span> setNeedsUpdateConstraints];</span><br><span class="line">    <span class="comment">// 更新约束，现在我们可以在动画里布局</span></span><br><span class="line">    [<span class="keyword">self</span> updateConstraintsIfNeeded];</span><br><span class="line">    <span class="comment">//  动画中布局</span></span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:<span class="number">0.4</span> animations:^&#123;</span><br><span class="line">        [<span class="keyword">self</span> layoutIfNeeded];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  该方法自动执行，执行完调用updateConstraints方法</span></span><br><span class="line">+ (<span class="built_in">BOOL</span>)requiresConstraintBasedLayout</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="使用常量"><a href="#使用常量" class="headerlink" title="使用常量"></a>使用常量</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  紫色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *purpleView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    purpleView.backgroundColor = <span class="built_in">UIColor</span>.purpleColor;</span><br><span class="line">    purpleView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    purpleView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:purpleView];</span><br><span class="line">    <span class="comment">//  橘色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *orangeView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    orangeView.backgroundColor = <span class="built_in">UIColor</span>.orangeColor;</span><br><span class="line">    orangeView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    orangeView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:orangeView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  使用equalTo添加常量，默认是跟父视图的相同属性进行约束</span></span><br><span class="line">    [purpleView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(<span class="number">20</span>);</span><br><span class="line">        make.left.equalTo(<span class="number">20</span>);</span><br><span class="line">        make.bottom.equalTo(<span class="number">-20</span>);</span><br><span class="line">        make.right.equalTo(<span class="number">-20</span>);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  自动装箱允许你使用能够转为NSValue的类型（比如：int、float）、CGPoint、CGSize、UIEdgeInsets等类型。</span></span><br><span class="line">    [orangeView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.center.equalTo(<span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">50</span>));</span><br><span class="line">        make.size.equalTo(<span class="built_in">CGSizeMake</span>(<span class="number">200</span>, <span class="number">100</span>));</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<h3 id="使用便利属性"><a href="#使用便利属性" class="headerlink" title="使用便利属性"></a>使用便利属性</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleSidesView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleSidesView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *lastView = <span class="keyword">self</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">UIView</span> *view = <span class="built_in">UIView</span>.new;</span><br><span class="line">        view.backgroundColor = [<span class="keyword">self</span> randomColor];</span><br><span class="line">        view.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">        view.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">        [<span class="keyword">self</span> addSubview:view];</span><br><span class="line">        </span><br><span class="line">        [view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.edges.equalTo(lastView).insets(<span class="built_in">UIEdgeInsetsMake</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>));</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        lastView = view;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIColor</span> *)randomColor &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> hue = ( arc4random() % <span class="number">256</span> / <span class="number">256.0</span> );  <span class="comment">//  0.0 to 1.0</span></span><br><span class="line">    <span class="built_in">CGFloat</span> saturation = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from white</span></span><br><span class="line">    <span class="built_in">CGFloat</span> brightness = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from black</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">UIColor</span> colorWithHue:hue saturation:saturation brightness:brightness alpha:<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="使用比例"><a href="#使用比例" class="headerlink" title="使用比例"></a>使用比例</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  创建view</span></span><br><span class="line">        <span class="keyword">self</span>.topView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span>];</span><br><span class="line">        <span class="built_in">UIColor</span> *blueColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.663</span> green:<span class="number">0.796</span> blue:<span class="number">0.996</span> alpha:<span class="number">1</span>];</span><br><span class="line">        [<span class="keyword">self</span>.topView setBackgroundColor:blueColor];</span><br><span class="line">        [<span class="keyword">self</span> addSubview:<span class="keyword">self</span>.topView];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.topInnerView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span>];</span><br><span class="line">        <span class="built_in">UIColor</span> *lightGreenColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.784</span> green:<span class="number">0.992</span> blue:<span class="number">0.851</span> alpha:<span class="number">1</span>];</span><br><span class="line">        [<span class="keyword">self</span>.topInnerView setBackgroundColor:lightGreenColor];</span><br><span class="line">        [<span class="keyword">self</span>.topView addSubview:<span class="keyword">self</span>.topInnerView];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.bottomView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span>];</span><br><span class="line">        <span class="built_in">UIColor</span> *pinkColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.992</span> green:<span class="number">0.804</span> blue:<span class="number">0.941</span> alpha:<span class="number">1</span>];</span><br><span class="line">        [<span class="keyword">self</span>.bottomView setBackgroundColor:pinkColor];</span><br><span class="line">        [<span class="keyword">self</span> addSubview:<span class="keyword">self</span>.bottomView];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.bottomInnerView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="built_in">CGRectZero</span>];</span><br><span class="line">        <span class="built_in">UIColor</span> *darkGreenColor = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.443</span> green:<span class="number">0.780</span> blue:<span class="number">0.337</span> alpha:<span class="number">1</span>];</span><br><span class="line">        [<span class="keyword">self</span>.bottomInnerView setBackgroundColor:darkGreenColor];</span><br><span class="line">        [<span class="keyword">self</span>.bottomView addSubview:<span class="keyword">self</span>.bottomInnerView];</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  添加约束</span></span><br><span class="line">        [<span class="keyword">self</span>.topView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.left.right.top.equalTo(<span class="keyword">self</span>);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        [<span class="keyword">self</span>.bottomView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.left.right.bottom.equalTo(<span class="keyword">self</span>);</span><br><span class="line">            make.top.equalTo(<span class="keyword">self</span>.topView.bottom);</span><br><span class="line">            make.height.equalTo(<span class="keyword">self</span>.topView);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        [<span class="keyword">self</span>.topInnerView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            <span class="comment">//  topInnerView.width = topInnerView.height * 3 +200</span></span><br><span class="line">            make.width.equalTo(<span class="keyword">self</span>.topInnerView.height).multipliedBy(<span class="number">3</span>).offset(<span class="number">200</span>);</span><br><span class="line">            make.width.equalTo(<span class="keyword">self</span>.topView);</span><br><span class="line">            make.center.equalTo(<span class="keyword">self</span>.topView);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        [<span class="keyword">self</span>.bottomInnerView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            <span class="comment">//  topInnerView.width = topInnerView.height * 3</span></span><br><span class="line">            make.height.equalTo(<span class="keyword">self</span>.bottomInnerView.width).multipliedBy(<span class="number">3</span>);</span><br><span class="line">            make.height.equalTo(<span class="keyword">self</span>.bottomView);</span><br><span class="line">            make.center.equalTo(<span class="keyword">self</span>.bottomView);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用动画"><a href="#使用动画" class="headerlink" title="使用动画"></a>使用动画</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleAnimatedView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleAnimatedView</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span> *animatableConstraints;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="keyword">int</span> padding;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">BOOL</span> animating;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleAnimatedView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  绿色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *greenView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    greenView.backgroundColor = <span class="built_in">UIColor</span>.greenColor;</span><br><span class="line">    greenView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    greenView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:greenView];</span><br><span class="line">    <span class="comment">//  红色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *redView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    redView.backgroundColor = <span class="built_in">UIColor</span>.redColor;</span><br><span class="line">    redView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    redView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:redView];</span><br><span class="line">    <span class="comment">//  蓝色视图</span></span><br><span class="line">    <span class="built_in">UIView</span> *blueView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    blueView.backgroundColor = <span class="built_in">UIColor</span>.blueColor;</span><br><span class="line">    blueView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    blueView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:blueView];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  superview</span></span><br><span class="line">    <span class="built_in">UIView</span> *superview = <span class="keyword">self</span>;</span><br><span class="line">    <span class="comment">//  padding</span></span><br><span class="line">    <span class="keyword">int</span> padding = <span class="keyword">self</span>.padding = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//  edgeInsets</span></span><br><span class="line">    <span class="built_in">UIEdgeInsets</span> paddingInsets = <span class="built_in">UIEdgeInsetsMake</span>(<span class="keyword">self</span>.padding, <span class="keyword">self</span>.padding, <span class="keyword">self</span>.padding, <span class="keyword">self</span>.padding);</span><br><span class="line">    <span class="comment">//  可做成动画的约束</span></span><br><span class="line">    <span class="keyword">self</span>.animatableConstraints = <span class="built_in">NSMutableArray</span>.new;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  添加约束</span></span><br><span class="line">    [greenView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.animatableConstraints addObjectsFromArray:@[</span><br><span class="line">            make.edges.equalTo(superview).insets(paddingInsets).priorityLow(),</span><br><span class="line">            make.bottom.equalTo(blueView.top).offset(-padding),</span><br><span class="line">        ]];</span><br><span class="line">        make.size.equalTo(redView);</span><br><span class="line">        make.height.equalTo(blueView);</span><br><span class="line">    &#125;];</span><br><span class="line">    [redView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.animatableConstraints addObjectsFromArray:@[</span><br><span class="line">            make.edges.equalTo(superview).insets(paddingInsets).priorityLow(),</span><br><span class="line">            make.left.equalTo(greenView.right).offset(padding),</span><br><span class="line">            make.bottom.equalTo(blueView.top).offset(-padding),</span><br><span class="line">        ]];</span><br><span class="line">        make.size.equalTo(greenView);</span><br><span class="line">        make.height.equalTo(blueView);</span><br><span class="line">    &#125;];</span><br><span class="line">    [blueView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.animatableConstraints addObjectsFromArray:@[</span><br><span class="line">            make.edges.equalTo(superview).insets(paddingInsets).priorityLow(),</span><br><span class="line">        ]];</span><br><span class="line">        make.height.equalTo(@[greenView,redView]);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  将要往window上添加视图时调用</span></span><br><span class="line">- (<span class="keyword">void</span>)willMoveToWindow:(<span class="built_in">UIWindow</span> *)newWindow &#123;</span><br><span class="line">    <span class="keyword">self</span>.animating = newWindow != <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  往window上添加视图时调用</span></span><br><span class="line">- (<span class="keyword">void</span>)didMoveToWindow &#123;</span><br><span class="line">    [<span class="keyword">self</span> layoutIfNeeded];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.window) &#123;</span><br><span class="line">        <span class="keyword">self</span>.animating = <span class="literal">YES</span>;</span><br><span class="line">        [<span class="keyword">self</span> animateWithInvertedInsets:<span class="literal">NO</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  添加动画</span></span><br><span class="line">- (<span class="keyword">void</span>)animateWithInvertedInsets:(<span class="built_in">BOOL</span>)invertedInsets &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>.animating) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> padding = invertedInsets ? <span class="number">100</span> : <span class="keyword">self</span>.padding;</span><br><span class="line">    <span class="built_in">UIEdgeInsets</span> paddingInsets = <span class="built_in">UIEdgeInsetsMake</span>(padding, padding, padding, padding);</span><br><span class="line">    <span class="comment">//  实现动画的关键步骤</span></span><br><span class="line">    <span class="keyword">for</span> (MASConstraint *constraint <span class="keyword">in</span> <span class="keyword">self</span>.animatableConstraints) &#123;</span><br><span class="line">        constraint.insets = paddingInsets;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="built_in">UIView</span> animateWithDuration:<span class="number">1</span> animations:^&#123;</span><br><span class="line">        [<span class="keyword">self</span> layoutIfNeeded];</span><br><span class="line">    &#125; completion:^(<span class="built_in">BOOL</span> finished) &#123;</span><br><span class="line">        <span class="comment">//  重复</span></span><br><span class="line">        [<span class="keyword">self</span> animateWithInvertedInsets:!invertedInsets];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="调试助手"><a href="#调试助手" class="headerlink" title="调试助手"></a>调试助手</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIView</span> *greenView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    greenView.backgroundColor = <span class="built_in">UIColor</span>.greenColor;</span><br><span class="line">    greenView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    greenView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:greenView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *redView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    redView.backgroundColor = <span class="built_in">UIColor</span>.redColor;</span><br><span class="line">    redView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    redView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:redView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UILabel</span> *blueView = <span class="built_in">UILabel</span>.new;</span><br><span class="line">    blueView.backgroundColor = <span class="built_in">UIColor</span>.blueColor;</span><br><span class="line">    blueView.numberOfLines = <span class="number">3</span>;</span><br><span class="line">    blueView.textAlignment = <span class="built_in">NSTextAlignmentCenter</span>;</span><br><span class="line">    blueView.font = [<span class="built_in">UIFont</span> systemFontOfSize:<span class="number">24</span>];</span><br><span class="line">    blueView.textColor = <span class="built_in">UIColor</span>.whiteColor;</span><br><span class="line">    blueView.text = <span class="string">@"this should look broken! check your console!"</span>;</span><br><span class="line">    blueView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    blueView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:blueView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *superview = <span class="keyword">self</span>;</span><br><span class="line">    <span class="keyword">int</span> padding = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  你可以添加调试的键：</span></span><br><span class="line"><span class="comment">//    greenView.mas_key = @"greenView";</span></span><br><span class="line"><span class="comment">//    redView.mas_key = @"redView";</span></span><br><span class="line"><span class="comment">//    blueView.mas_key = @"blueView";</span></span><br><span class="line"><span class="comment">//    superview.mas_key = @"superview";</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//  或者你可以批量添加键:</span></span><br><span class="line">    MASAttachKeys(greenView, redView, blueView, superview);</span><br><span class="line"></span><br><span class="line">    [blueView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        <span class="comment">//  你也可给约束添加键</span></span><br><span class="line">        make.edges.equalTo(<span class="number">1</span>).key(<span class="string">@"ConflictingConstraint"</span>); <span class="comment">//composite constraint keys will be indexed</span></span><br><span class="line">        make.height.greaterThanOrEqualTo(<span class="number">5000</span>).key(<span class="string">@"ConstantConstraint"</span>);</span><br><span class="line"></span><br><span class="line">        make.top.equalTo(greenView.mas_bottom).offset(padding);</span><br><span class="line">        make.left.equalTo(superview.mas_left).offset(padding);</span><br><span class="line">        make.bottom.equalTo(superview.mas_bottom).offset(-padding).key(<span class="string">@"BottomConstraint"</span>);</span><br><span class="line">        make.right.equalTo(superview.mas_right).offset(-padding);</span><br><span class="line">        make.height.equalTo(greenView.mas_height);</span><br><span class="line">        make.height.equalTo(redView.mas_height).key(@<span class="number">340954</span>); <span class="comment">//anything can be a key</span></span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    [greenView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.greaterThanOrEqualTo(superview.top).offset(padding);</span><br><span class="line">        make.left.equalTo(superview.left).offset(padding);</span><br><span class="line">        make.bottom.equalTo(blueView.top).offset(-padding);</span><br><span class="line">        make.right.equalTo(redView.left).offset(-padding);</span><br><span class="line">        make.width.equalTo(redView.width);</span><br><span class="line"></span><br><span class="line">        make.height.equalTo(redView.height);</span><br><span class="line">        make.height.equalTo(blueView.height);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//with is semantic and option</span></span><br><span class="line">    [redView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(superview.mas_top).with.offset(padding);</span><br><span class="line">        make.left.equalTo(greenView.mas_right).offset(padding);</span><br><span class="line">        make.bottom.equalTo(blueView.mas_top).offset(-padding);</span><br><span class="line">        make.right.equalTo(superview.mas_right).offset(-padding);</span><br><span class="line">        make.width.equalTo(greenView.mas_width);</span><br><span class="line"></span><br><span class="line">        make.height.equalTo(@[greenView, blueView]);</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<h3 id="Scrollview-Label-A"><a href="#Scrollview-Label-A" class="headerlink" title="Scrollview+Label_A"></a>Scrollview+Label_A</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleScrollview_Label_A.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleScrollview_Label_A</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIScrollView</span> *scrollView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleScrollview_Label_A</span></span></span><br><span class="line">- (instancetype)init&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//  scrollview</span></span><br><span class="line">    <span class="keyword">self</span>.scrollView = [[<span class="built_in">UIScrollView</span> alloc] init];</span><br><span class="line">    <span class="keyword">self</span>.scrollView.pagingEnabled = <span class="literal">NO</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:<span class="keyword">self</span>.scrollView];</span><br><span class="line">    <span class="keyword">self</span>.scrollView.backgroundColor = [<span class="built_in">UIColor</span> lightGrayColor];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  记录最后一个label</span></span><br><span class="line">    <span class="built_in">UILabel</span> *lastLabel = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">UILabel</span> *label = [[<span class="built_in">UILabel</span> alloc] init];</span><br><span class="line">        label.numberOfLines = <span class="number">0</span>;</span><br><span class="line">        label.layer.borderColor = [<span class="built_in">UIColor</span> greenColor].CGColor;</span><br><span class="line">        label.layer.borderWidth = <span class="number">2.0</span>;</span><br><span class="line">        label.text = [<span class="keyword">self</span> randomText];</span><br><span class="line">        </span><br><span class="line">        label.textAlignment = <span class="built_in">NSTextAlignmentLeft</span>;</span><br><span class="line">        label.textColor = [<span class="keyword">self</span> randomColor];</span><br><span class="line">        [<span class="keyword">self</span>.scrollView addSubview:label];</span><br><span class="line">        </span><br><span class="line">        [label makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            <span class="comment">//  注意：通过约束设置label时不用设置高度，label会根据内容自己设置高度</span></span><br><span class="line">            make.left.equalTo(<span class="number">15</span>);</span><br><span class="line">            make.right.equalTo(<span class="keyword">self</span>).offset(<span class="number">-15</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (lastLabel) &#123;</span><br><span class="line">                make.top.equalTo(lastLabel.bottom).offset(<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                make.top.equalTo(<span class="keyword">self</span>.scrollView).offset(<span class="number">20</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        lastLabel = label;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.scrollView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.edges.equalTo(<span class="keyword">self</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 让scrollview的contentSize随着内容的增多而变化</span></span><br><span class="line">        make.bottom.equalTo(lastLabel.bottom).offset(<span class="number">20</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIColor</span> *)randomColor &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> hue = ( arc4random() % <span class="number">256</span> / <span class="number">256.0</span> );  <span class="comment">//  0.0 to 1.0</span></span><br><span class="line">    <span class="built_in">CGFloat</span> saturation = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from white</span></span><br><span class="line">    <span class="built_in">CGFloat</span> brightness = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from black</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">UIColor</span> colorWithHue:hue saturation:saturation brightness:brightness alpha:<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)randomText &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> length = arc4random() % <span class="number">50</span> + <span class="number">5</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSMutableString</span> *str = [[<span class="built_in">NSMutableString</span> alloc] init];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">0</span>; i &lt; length; ++i) &#123;</span><br><span class="line">        [str appendString:<span class="string">@"测试数据很长，"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="Scrollview-Label-B"><a href="#Scrollview-Label-B" class="headerlink" title="Scrollview+Label_B"></a>Scrollview+Label_B</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleScrollview_Label_B.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleScrollview_Label_B</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIScrollView</span> *scrollView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSMutableArray</span> *expandStates;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleScrollview_Label_B</span></span></span><br><span class="line"></span><br><span class="line">- (instancetype)init&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.scrollView = [[<span class="built_in">UIScrollView</span> alloc] init];</span><br><span class="line">    <span class="keyword">self</span>.scrollView.pagingEnabled = <span class="literal">NO</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:<span class="keyword">self</span>.scrollView];</span><br><span class="line">    <span class="keyword">self</span>.scrollView.backgroundColor = [<span class="built_in">UIColor</span> lightGrayColor];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UILabel</span> *lastLabel = <span class="literal">nil</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">UILabel</span> *label = [[<span class="built_in">UILabel</span> alloc] init];</span><br><span class="line">        label.numberOfLines = <span class="number">0</span>;</span><br><span class="line">        label.layer.borderColor = [<span class="built_in">UIColor</span> greenColor].CGColor;</span><br><span class="line">        label.layer.borderWidth = <span class="number">2.0</span>;</span><br><span class="line">        label.text = [<span class="keyword">self</span> randomText];</span><br><span class="line">        label.userInteractionEnabled = <span class="literal">YES</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">UITapGestureRecognizer</span> *tap = [[<span class="built_in">UITapGestureRecognizer</span> alloc] initWithTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(onTap:)];</span><br><span class="line">        [label addGestureRecognizer:tap];</span><br><span class="line">        </span><br><span class="line">        label.textAlignment = <span class="built_in">NSTextAlignmentLeft</span>;</span><br><span class="line">        label.textColor = [<span class="keyword">self</span> randomColor];</span><br><span class="line">        [<span class="keyword">self</span>.scrollView addSubview:label];</span><br><span class="line">        </span><br><span class="line">        [label mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.left.mas_equalTo(<span class="number">15</span>);</span><br><span class="line">            make.right.mas_equalTo(<span class="keyword">self</span>).offset(<span class="number">-15</span>);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> (lastLabel) &#123;</span><br><span class="line">                make.top.mas_equalTo(lastLabel.mas_bottom).offset(<span class="number">20</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                make.top.mas_equalTo(<span class="keyword">self</span>.scrollView).offset(<span class="number">20</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            make.height.mas_equalTo(<span class="number">40</span>);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        lastLabel = label;</span><br><span class="line">        </span><br><span class="line">        [<span class="keyword">self</span>.expandStates addObject:[@[label, @(<span class="literal">NO</span>)] mutableCopy]];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span>.scrollView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.edges.mas_equalTo(<span class="keyword">self</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 让scrollview的contentSize随着内容的增多而变化</span></span><br><span class="line">        make.bottom.mas_equalTo(lastLabel.bottom).offset(<span class="number">20</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSMutableArray</span> *)expandStates &#123;</span><br><span class="line">    <span class="keyword">if</span> (_expandStates == <span class="literal">nil</span>) &#123;</span><br><span class="line">        _expandStates = [[<span class="built_in">NSMutableArray</span> alloc] init];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> _expandStates;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIColor</span> *)randomColor &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> hue = ( arc4random() % <span class="number">256</span> / <span class="number">256.0</span> );  <span class="comment">//  0.0 to 1.0</span></span><br><span class="line">    <span class="built_in">CGFloat</span> saturation = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from white</span></span><br><span class="line">    <span class="built_in">CGFloat</span> brightness = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from black</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">UIColor</span> colorWithHue:hue saturation:saturation brightness:brightness alpha:<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSString</span> *)randomText &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> length = arc4random() % <span class="number">150</span> + <span class="number">5</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSMutableString</span> *str = [[<span class="built_in">NSMutableString</span> alloc] init];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSUInteger</span> i = <span class="number">0</span>; i &lt; length; ++i) &#123;</span><br><span class="line">        [str appendString:<span class="string">@"测试数据很长，"</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)onTap:(<span class="built_in">UITapGestureRecognizer</span> *)sender &#123;</span><br><span class="line">    <span class="built_in">UIView</span> *tapView = sender.view;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSUInteger</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSMutableArray</span> *array <span class="keyword">in</span> <span class="keyword">self</span>.expandStates) &#123;</span><br><span class="line">        <span class="built_in">UILabel</span> *view = [array firstObject];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (view == tapView) &#123;</span><br><span class="line">            <span class="built_in">NSNumber</span> *state = [array lastObject];</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 当前是展开状态的话，就收缩</span></span><br><span class="line">            <span class="keyword">if</span> ([state boolValue] == <span class="literal">YES</span>) &#123;</span><br><span class="line">                [view mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                    make.height.mas_equalTo(<span class="number">40</span>);</span><br><span class="line">                &#125;];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">UIView</span> *preView = <span class="literal">nil</span>;</span><br><span class="line">                <span class="built_in">UIView</span> *nextView = <span class="literal">nil</span>;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (index - <span class="number">1</span> &lt; <span class="keyword">self</span>.expandStates.count &amp;&amp; index &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">                    preView = [[<span class="keyword">self</span>.expandStates objectAtIndex:index - <span class="number">1</span>] firstObject];</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (index + <span class="number">1</span> &lt; <span class="keyword">self</span>.expandStates.count) &#123;</span><br><span class="line">                    nextView = [[<span class="keyword">self</span>.expandStates objectAtIndex:index + <span class="number">1</span>] firstObject];</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                [view mas_remakeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (preView) &#123;</span><br><span class="line">                        make.top.mas_equalTo(preView.mas_bottom).offset(<span class="number">20</span>);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        make.top.mas_equalTo(<span class="number">20</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    make.left.mas_equalTo(<span class="number">15</span>);</span><br><span class="line">                    make.right.mas_equalTo(<span class="keyword">self</span>).offset(<span class="number">-15</span>);</span><br><span class="line">                &#125;];</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> (nextView) &#123;</span><br><span class="line">                    [nextView mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                        make.top.mas_equalTo(view.mas_bottom).offset(<span class="number">20</span>);</span><br><span class="line">                    &#125;];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            [array replaceObjectAtIndex:<span class="number">1</span> withObject:@(!state.boolValue)];</span><br><span class="line">            </span><br><span class="line">            [<span class="keyword">self</span> setNeedsUpdateConstraints];</span><br><span class="line">            [<span class="keyword">self</span> updateConstraintsIfNeeded];</span><br><span class="line">            </span><br><span class="line">            [<span class="built_in">UIView</span> animateWithDuration:<span class="number">0.35</span> animations:^&#123;</span><br><span class="line">                [<span class="keyword">self</span> layoutIfNeeded];</span><br><span class="line">            &#125; completion:^(<span class="built_in">BOOL</span> finished) &#123;</span><br><span class="line">                </span><br><span class="line">            &#125;];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        index++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="Scrollview-View"><a href="#Scrollview-View" class="headerlink" title="Scrollview+View"></a>Scrollview+View</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleScrollview_View.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleScrollview_View</span> ()</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">UIScrollView</span>* scrollView;</span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleScrollview_View</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIScrollView</span> *scrollView = <span class="built_in">UIScrollView</span>.new;</span><br><span class="line">    <span class="keyword">self</span>.scrollView = scrollView;</span><br><span class="line">    scrollView.backgroundColor = [<span class="built_in">UIColor</span> grayColor];</span><br><span class="line">    [<span class="keyword">self</span> addSubview:scrollView];</span><br><span class="line">    [<span class="keyword">self</span>.scrollView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.edges.equalTo(<span class="keyword">self</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> generateContent];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)generateContent &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *lastView;</span><br><span class="line">    <span class="built_in">CGFloat</span> height = <span class="number">25</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">UIView</span> *view = <span class="built_in">UIView</span>.new;</span><br><span class="line">        view.backgroundColor = [<span class="keyword">self</span> randomColor];</span><br><span class="line">        [<span class="keyword">self</span>.scrollView addSubview:view];</span><br><span class="line">        [view mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.top.equalTo(lastView ? lastView.bottom : @<span class="number">0</span>);</span><br><span class="line">            make.left.equalTo(@<span class="number">0</span>);</span><br><span class="line">            make.width.equalTo(<span class="keyword">self</span>.scrollView.width);</span><br><span class="line">            make.height.equalTo(@(height));</span><br><span class="line">        &#125;];</span><br><span class="line">        height += <span class="number">25</span>;</span><br><span class="line">        lastView = view;</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span>.scrollView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.bottom.equalTo(lastView.bottom);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIColor</span> *)randomColor &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> hue = ( arc4random() % <span class="number">256</span> / <span class="number">256.0</span> );  <span class="comment">//  0.0 to 1.0</span></span><br><span class="line">    <span class="built_in">CGFloat</span> saturation = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from white</span></span><br><span class="line">    <span class="built_in">CGFloat</span> brightness = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from black</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">UIColor</span> colorWithHue:hue saturation:saturation brightness:brightness alpha:<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="数组设置约束"><a href="#数组设置约束" class="headerlink" title="数组设置约束"></a>数组设置约束</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleArrayView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="built_in">CGFloat</span> <span class="keyword">const</span> kArrayExampleIncrement = <span class="number">10.0</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">MASExampleArrayView</span> ()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> offset;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> *buttonViews;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleArrayView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIButton</span> *raiseButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeSystem</span>];</span><br><span class="line">    [raiseButton setTitle:<span class="string">@"Raise"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [raiseButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(raiseAction) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">    [<span class="keyword">self</span> addSubview:raiseButton];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIButton</span> *centerButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeSystem</span>];</span><br><span class="line">    [centerButton setTitle:<span class="string">@"Center"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [centerButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(centerAction) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">    [<span class="keyword">self</span> addSubview:centerButton];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIButton</span> *lowerButton = [<span class="built_in">UIButton</span> buttonWithType:<span class="built_in">UIButtonTypeSystem</span>];</span><br><span class="line">    [lowerButton setTitle:<span class="string">@"Lower"</span> forState:<span class="built_in">UIControlStateNormal</span>];</span><br><span class="line">    [lowerButton addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(lowerAction) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line">    [<span class="keyword">self</span> addSubview:lowerButton];</span><br><span class="line">    </span><br><span class="line">    [lowerButton mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.left.equalTo(<span class="keyword">self</span>).with.offset(<span class="number">10.0</span>);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [centerButton mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.centerX.equalTo(<span class="keyword">self</span>);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [raiseButton mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.right.equalTo(<span class="keyword">self</span>).with.offset(<span class="number">-10</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.buttonViews = @[ raiseButton, lowerButton, centerButton ];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)centerAction &#123;</span><br><span class="line">    <span class="keyword">self</span>.offset = <span class="number">0.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)raiseAction &#123;</span><br><span class="line">    <span class="keyword">self</span>.offset -= kArrayExampleIncrement;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)lowerAction &#123;</span><br><span class="line">    <span class="keyword">self</span>.offset += kArrayExampleIncrement;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)setOffset:(<span class="built_in">CGFloat</span>)offset &#123;</span><br><span class="line">    _offset = offset;</span><br><span class="line">    [<span class="keyword">self</span> setNeedsUpdateConstraints];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)updateConstraints &#123;</span><br><span class="line">    [<span class="keyword">self</span>.buttonViews updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        <span class="comment">//  数组更新约束</span></span><br><span class="line">        make.baseline.equalTo(<span class="keyword">self</span>.mas_centerY).with.offset(<span class="keyword">self</span>.offset);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">super</span> updateConstraints];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="属性链"><a href="#属性链" class="headerlink" title="属性链"></a>属性链</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleAttributeChainingView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleAttributeChainingView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *greenView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    greenView.backgroundColor = <span class="built_in">UIColor</span>.greenColor;</span><br><span class="line">    greenView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    greenView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:greenView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *redView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    redView.backgroundColor = <span class="built_in">UIColor</span>.redColor;</span><br><span class="line">    redView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    redView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:redView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *blueView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    blueView.backgroundColor = <span class="built_in">UIColor</span>.blueColor;</span><br><span class="line">    blueView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    blueView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span> addSubview:blueView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *superview = <span class="keyword">self</span>;</span><br><span class="line">    <span class="built_in">UIEdgeInsets</span> padding = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">15</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [greenView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        <span class="comment">//  属性链</span></span><br><span class="line">        make.top.and.left.equalTo(superview).insets(padding);</span><br><span class="line">        make.bottom.equalTo(blueView.mas_top).insets(padding);</span><br><span class="line">        make.right.equalTo(redView.mas_left).insets(padding);</span><br><span class="line">        make.width.equalTo(redView.mas_width);</span><br><span class="line"></span><br><span class="line">        make.height.equalTo(@[redView, blueView]);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [redView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        <span class="comment">//  属性链</span></span><br><span class="line">        make.top.and.right.equalTo(superview).insets(padding);</span><br><span class="line"></span><br><span class="line">        make.left.equalTo(greenView.mas_right).insets(padding);</span><br><span class="line">        make.bottom.equalTo(blueView.mas_top).insets(padding);</span><br><span class="line">        make.width.equalTo(greenView.mas_width);</span><br><span class="line"></span><br><span class="line">        make.height.equalTo(@[greenView, blueView]);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [blueView mas_makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(greenView.mas_bottom).insets(padding);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//  属性链</span></span><br><span class="line">        make.left.right.and.bottom.equalTo(superview).insets(padding);</span><br><span class="line"></span><br><span class="line">        make.height.equalTo(@[greenView, redView]);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="边缘属性"><a href="#边缘属性" class="headerlink" title="边缘属性"></a>边缘属性</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleMarginView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleMarginView</span></span></span><br><span class="line"></span><br><span class="line">- (instancetype)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIView</span> *lastView = <span class="keyword">self</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">UIView</span> *view = <span class="built_in">UIView</span>.new;</span><br><span class="line">        view.backgroundColor = [<span class="keyword">self</span> randomColor];</span><br><span class="line">        view.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">        view.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">        <span class="comment">//  设置视图的边缘insets</span></span><br><span class="line">        view.layoutMargins = <span class="built_in">UIEdgeInsetsMake</span>(<span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>, <span class="number">20</span>);</span><br><span class="line">        [<span class="keyword">self</span> addSubview:view];</span><br><span class="line">        </span><br><span class="line">        [view makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.top.equalTo(lastView.topMargin);</span><br><span class="line">            make.bottom.equalTo(lastView.bottomMargin);</span><br><span class="line">            make.left.equalTo(lastView.leftMargin);</span><br><span class="line">            make.right.equalTo(lastView.rightMargin);</span><br><span class="line">        &#125;];</span><br><span class="line">        </span><br><span class="line">        lastView = view;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIColor</span> *)randomColor &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> hue = ( arc4random() % <span class="number">256</span> / <span class="number">256.0</span> );  <span class="comment">//  0.0 to 1.0</span></span><br><span class="line">    <span class="built_in">CGFloat</span> saturation = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from white</span></span><br><span class="line">    <span class="built_in">CGFloat</span> brightness = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from black</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">UIColor</span> colorWithHue:hue saturation:saturation brightness:brightness alpha:<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="设置等间距约束"><a href="#设置等间距约束" class="headerlink" title="设置等间距约束"></a>设置等间距约束</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"MASExampleDistributeView.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">MASExampleDistributeView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>) <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     *  可以把几个视图看成一个整视图进行布局</span><br><span class="line">     */</span></span><br><span class="line">    <span class="built_in">NSMutableArray</span> *arr = @[].mutableCopy;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">        <span class="built_in">UIView</span> *view = <span class="built_in">UIView</span>.new;</span><br><span class="line">        view.backgroundColor = [<span class="keyword">self</span> randomColor];</span><br><span class="line">        view.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">        view.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">        [<span class="keyword">self</span> addSubview:view];</span><br><span class="line">        [arr addObject:view];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> type  = arc4random()%<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">            <span class="comment">/**</span><br><span class="line">             *  多个控件固定间隔的等间隔排列，变化的是控件的长度或者宽度值（这里变化的是宽度）</span><br><span class="line">             */</span></span><br><span class="line">            <span class="comment">//  方向：水平分布，间距：20，首间距：5（这里是左间距），尾间距：5（这里是右间距）</span></span><br><span class="line">            [arr mas_distributeViewsAlongAxis:MASAxisTypeHorizontal withFixedSpacing:<span class="number">20</span> leadSpacing:<span class="number">5</span> tailSpacing:<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">            [arr makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                <span class="comment">//  上间距</span></span><br><span class="line">                make.top.equalTo(@<span class="number">60</span>);</span><br><span class="line">                <span class="comment">//  宽</span></span><br><span class="line">                make.height.equalTo(@<span class="number">60</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">            <span class="comment">/**</span><br><span class="line">             *  多个控件固定间隔的等间隔排列，变化的是控件的长度或者宽度值（这里变化的是高度）</span><br><span class="line">             */</span></span><br><span class="line">            <span class="comment">//  方向：水平分布，间距：20，首间距：5（这里是上间距），尾间距：5（这里是下间距）</span></span><br><span class="line">            [arr mas_distributeViewsAlongAxis:MASAxisTypeVertical withFixedSpacing:<span class="number">20</span> leadSpacing:<span class="number">5</span> tailSpacing:<span class="number">5</span>];</span><br><span class="line">            [arr makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                make.left.equalTo(@<span class="number">60</span>);</span><br><span class="line">                make.width.equalTo(@<span class="number">60</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">            <span class="comment">/**</span><br><span class="line">             *  多个固定大小的控件的等间隔排列,变化的是间隔的空隙</span><br><span class="line">             */</span></span><br><span class="line">            <span class="comment">//  方向：水平分布，每个视图长度：10，首间距：10（这里是左间距），尾间距：10（这里是右间距）</span></span><br><span class="line">            [arr mas_distributeViewsAlongAxis:MASAxisTypeHorizontal withFixedItemLength:<span class="number">10</span> leadSpacing:<span class="number">10</span> tailSpacing:<span class="number">10</span>];</span><br><span class="line">            [arr makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                make.top.equalTo(@<span class="number">60</span>);</span><br><span class="line">                make.height.equalTo(@<span class="number">60</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">            <span class="comment">/**</span><br><span class="line">             *  多个固定大小的控件的等间隔排列,变化的是间隔的空隙</span><br><span class="line">             */</span></span><br><span class="line">            <span class="comment">//  方向：水平分布，每个视图长度：30，首间距：30（这里是上间距），尾间距：200（这里是下间距）</span></span><br><span class="line">            [arr mas_distributeViewsAlongAxis:MASAxisTypeVertical withFixedItemLength:<span class="number">30</span> leadSpacing:<span class="number">30</span> tailSpacing:<span class="number">200</span>];</span><br><span class="line">            [arr makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                make.left.equalTo(@<span class="number">0</span>);</span><br><span class="line">                make.width.equalTo(@<span class="number">60</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIColor</span> *)randomColor &#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> hue = ( arc4random() % <span class="number">256</span> / <span class="number">256.0</span> );  <span class="comment">//  0.0 to 1.0</span></span><br><span class="line">    <span class="built_in">CGFloat</span> saturation = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from white</span></span><br><span class="line">    <span class="built_in">CGFloat</span> brightness = ( arc4random() % <span class="number">128</span> / <span class="number">256.0</span> ) + <span class="number">0.5</span>;  <span class="comment">//  0.5 to 1.0, away from black</span></span><br><span class="line">    <span class="keyword">return</span> [<span class="built_in">UIColor</span> colorWithHue:hue saturation:saturation brightness:brightness alpha:<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<h3 id="参考线"><a href="#参考线" class="headerlink" title="参考线"></a>参考线</h3><p>&lt; 代码示例 &gt;</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.view.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *topView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    topView.backgroundColor = <span class="built_in">UIColor</span>.greenColor;</span><br><span class="line">    topView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    topView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:topView];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *topSubview = <span class="built_in">UIView</span>.new;</span><br><span class="line">    topSubview.backgroundColor = <span class="built_in">UIColor</span>.blueColor;</span><br><span class="line">    topSubview.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    topSubview.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [topView addSubview:topSubview];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIView</span> *bottomView = <span class="built_in">UIView</span>.new;</span><br><span class="line">    bottomView.backgroundColor = <span class="built_in">UIColor</span>.redColor;</span><br><span class="line">    bottomView.layer.borderColor = <span class="built_in">UIColor</span>.blackColor.CGColor;</span><br><span class="line">    bottomView.layer.borderWidth = <span class="number">2</span>;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:bottomView];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     mas_topLayoutGuide，导航控制器不透明时，认为约束是从(0,64)开始，透明时是从(0,0)开始</span><br><span class="line">     mas_topLayoutGuideTop，导航控制器投不透明都是从(0,0)开始约束</span><br><span class="line">     mas_topLayoutGuideBottom，导航控制器投不透明都是从(0,64)开始约束</span><br><span class="line">     </span><br><span class="line">     mas_bottomLayoutGuide，标签控制器不透明时，认为约束是从(0,height-44)开始，透明时是从(0,height)开始</span><br><span class="line">     mas_bottomLayoutGuideTop，标签控制器投不透明都是从(0,height-44)开始约束</span><br><span class="line">     mas_bottomLayoutGuideBottom，标签控制器投不透明都是从(0,height)开始约束</span><br><span class="line">     */</span></span><br><span class="line">    [topView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(<span class="keyword">self</span>.mas_topLayoutGuide);</span><br><span class="line">        make.left.equalTo(<span class="keyword">self</span>.view);</span><br><span class="line">        make.right.equalTo(<span class="keyword">self</span>.view);</span><br><span class="line">        make.height.equalTo(@<span class="number">40</span>);</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line">    [topSubview makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.top.equalTo(<span class="keyword">self</span>.mas_topLayoutGuideBottom);</span><br><span class="line">        make.centerX.equalTo(@<span class="number">0</span>);</span><br><span class="line">        make.width.equalTo(@<span class="number">20</span>);</span><br><span class="line">        make.height.equalTo(@<span class="number">20</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    [bottomView makeConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">        make.bottom.equalTo(<span class="keyword">self</span>.mas_bottomLayoutGuide);</span><br><span class="line">        make.left.equalTo(<span class="keyword">self</span>.view);</span><br><span class="line">        make.right.equalTo(<span class="keyword">self</span>.view);</span><br><span class="line">        make.height.equalTo(@<span class="number">40</span>);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="揭秘Masonry"><a href="#揭秘Masonry" class="headerlink" title="揭秘Masonry"></a>揭秘Masonry</h2><p>待续。。。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="http://www.jianshu.com/p/1841e6c69611" target="_blank" rel="external">追求Masonry</a><br><a href="https://github.com/SnapKit/Masonry" target="_blank" rel="external">SnapKit/Masonry</a></p>
<hr>

      
    </div>
    
    <div>
      
        
      
    </div>

    <div>
      
        
<div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center">
<div>想请我吃辣条吗？</div>
<button id="rewardButton", disable="enable", onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}", style="cursor: pointer; border: 0; outline: 0; border-radius: 100%; padding: 0; margin: 0; letter-spacing: normal; text-transform: none; text-indent: 0px; text-shadow: none">
<span onmouseover="this.style.color='rgb(236,96,0)';this.style.background='rgb(204,204,204)'" onMouseOut="this.style.color='#fff';this.style.background='rgb(236,96,0)'" style="display: inline-block; width: 70px; height: 70px; border-radius: 100%; line-height: 81px; color: #fff; font: 400 35px/75px 'microsofty'; background: rgb(236,96,0)">赏</span>
</button>
<div id="QR" style="display: none;">

<div id="wechat" style="display: inline-block">
<img id="wechat_qr" src="http://i4.piimg.com/508f386ab6942876.jpg" alt="SanFordy WeChat Pay" style="width: 200px; max-width: 100%; display: inline-block"/>
<p>微信打赏</p>
</div>


<div id="alipay" style="display: inline-block">
<img id="alipay_qr" src="http://i4.piimg.com/481cbcc6ec69d37b.png" alt="SanFordy Alipay" style="width: 200px; max-width: 100%; display: inline-block"/>
<p>支付宝打赏</p>
</div>

</div>
</div>

      
    </div>

    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/10/〖A〗OC-iOS-Higher/【01】HTTP请求返回状态码详解/" rel="next" title="【01】HTTP请求返回状态码详解">
                <i class="fa fa-chevron-left"></i> 【01】HTTP请求返回状态码详解
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/09/〖A〗OC-iOS-Higher/【02】各种编程术语/" rel="prev" title="【02】各种编程术语">
                【02】各种编程术语 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/09/27/〖A〗OC-iOS-Third/【00】Masonry（v-0-6-4）/"
           data-title="【00】Masonry（v 0.6.4）" data-url="http://sanfordy.com/2016/09/27/〖A〗OC-iOS-Third/【00】Masonry（v-0-6-4）/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/icon.jpg"
               alt="SanFordy" />
          <p class="site-author-name" itemprop="name">SanFordy</p>
          <p class="site-description motion-element" itemprop="description">是时候表演真正的技术啦！</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">56</span>
              <span class="site-state-item-name">归档</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="GitHub">
                  
                    <i class="fa fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="Weibo">
                  
                    <i class="fa fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="Twitter">
                  
                    <i class="fa fa-twitter-square"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="Facebook">
                  
                    <i class="fa fa-facebook-square"></i>
                  
                  Facebook
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="Stackoverflow">
                  
                    <i class="fa fa-stack-overflow"></i>
                  
                  Stackoverflow
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-book"></i>
                  
                  Zhihu
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="" target="_blank" title="Douban">
                  
                    <i class="fa fa-coffee"></i>
                  
                  Douban
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        
          <div class="links-of-blogroll motion-element">
            <div class="links-of-blogroll-title">
              <i class="fa fa-globe fa-fw"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.guijj.com/pics/201404/535a0243a9698.gif" title="biggift" target="_blank">biggift</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#了解Masonry"><span class="nav-number">2.</span> <span class="nav-text">了解Masonry</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Masonry与传统布局的不同"><span class="nav-number">2.1.</span> <span class="nav-text">Masonry与传统布局的不同</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#约束"><span class="nav-number">2.2.</span> <span class="nav-text">约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性"><span class="nav-number">2.3.</span> <span class="nav-text">属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#MASConstraintMaker"><span class="nav-number">2.3.1.</span> <span class="nav-text">MASConstraintMaker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#MASConstraint"><span class="nav-number">2.3.2.</span> <span class="nav-text">MASConstraint</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIView"><span class="nav-number">2.3.3.</span> <span class="nav-text">UIView</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关系"><span class="nav-number">2.4.</span> <span class="nav-text">关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#乘数"><span class="nav-number">2.5.</span> <span class="nav-text">乘数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常量"><span class="nav-number">2.6.</span> <span class="nav-text">常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#小技巧"><span class="nav-number">2.7.</span> <span class="nav-text">小技巧</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置约束"><span class="nav-number">2.8.</span> <span class="nav-text">设置约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#批量设置约束"><span class="nav-number">2.9.</span> <span class="nav-text">批量设置约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优先级"><span class="nav-number">2.10.</span> <span class="nav-text">优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#键"><span class="nav-number">2.11.</span> <span class="nav-text">键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#速记"><span class="nav-number">2.12.</span> <span class="nav-text">速记</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用Masonry"><span class="nav-number">3.</span> <span class="nav-text">使用Masonry</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#添加约束"><span class="nav-number">3.1.</span> <span class="nav-text">添加约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新约束"><span class="nav-number">3.2.</span> <span class="nav-text">更新约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#移除约束"><span class="nav-number">3.3.</span> <span class="nav-text">移除约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用常量"><span class="nav-number">3.4.</span> <span class="nav-text">使用常量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用便利属性"><span class="nav-number">3.5.</span> <span class="nav-text">使用便利属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用比例"><span class="nav-number">3.6.</span> <span class="nav-text">使用比例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用动画"><span class="nav-number">3.7.</span> <span class="nav-text">使用动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#调试助手"><span class="nav-number">3.8.</span> <span class="nav-text">调试助手</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scrollview-Label-A"><span class="nav-number">3.9.</span> <span class="nav-text">Scrollview+Label_A</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scrollview-Label-B"><span class="nav-number">3.10.</span> <span class="nav-text">Scrollview+Label_B</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Scrollview-View"><span class="nav-number">3.11.</span> <span class="nav-text">Scrollview+View</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数组设置约束"><span class="nav-number">3.12.</span> <span class="nav-text">数组设置约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#属性链"><span class="nav-number">3.13.</span> <span class="nav-text">属性链</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#边缘属性"><span class="nav-number">3.14.</span> <span class="nav-text">边缘属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置等间距约束"><span class="nav-number">3.15.</span> <span class="nav-text">设置等间距约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考线"><span class="nav-number">3.16.</span> <span class="nav-text">参考线</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#揭秘Masonry"><span class="nav-number">4.</span> <span class="nav-text">揭秘Masonry</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">5.</span> <span class="nav-text">参考</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SanFordy</span>
</div>





        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sanfordy"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
